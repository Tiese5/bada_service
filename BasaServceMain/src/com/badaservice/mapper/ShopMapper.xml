<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mtbatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- 이 파일의 경로를 config.xml에 명시 해야한다 -->
<!-- professor 테이블에 대한 CRUD 기능을 구현하기 위함 Mapper -->
<mapper namespace="ShopMapper">
	<!-- Beans 클래스의 객체 이름(id)과 클래스 이름 (type)을 명시한다 -->
	<resultMap id="shop" type="com.badaservice.model.Shop">
		<result property="id" column="id" />
		<result property="item_title" column="item_title" />
		<result property="content" column="content" />
		<result property="price" column="price" />
		<result property="reg_date" column="reg_date" />
		<result property="item_image" column="item_image" />
		<result property="member_id" column="member_id" />
		<result property="category" column="category" />
		<result property="hit" column="hit" />
		<result property="dropDown" column="drop_down" />
	</resultMap>
	<!-- 게시물 업데이트 -->
	<insert id="insertItem" parameterType="com.badaservice.model.Shop"
		useGeneratedKeys="true" keyProperty="id">
		INSERT INTO item_add(
		item_title, category,price,item_image,content,
		reg_date,member_id,hit
		)VALUES(
		#{item_title},#{category},price,item_image,content,
		now(),#{member_id},#{hit}
		)
	</insert>

	<!-- 게시물 목록을 조회한다 -->
	<select id="selectItemList" parameterType="com.badaservice.model.Shop"
		resultMap="shop">
		SELECT item_title,price,item_image
		FROM item_add
		
		<choose>
			<when test="dropDown==1">
				ORDER BY reg_date DESC
			</when>
			<when test="dropDown==2">
				ORDER BY hit DESC
			</when>
			<when test="dropDown==3">
				ORDER BY price ASC
			</when>
			<otherwise>
				ORDER BY item_title ASC
			</otherwise>
		</choose>
		
		
		<!-- LIMIT #{limitStart},#{listCount}; -->
	</select>

	<!-- 게시물 하나에 대한 조회 -->
	<!-- <select id="selectQna" parameterType="com.badaservice.model.Shop"
		resultMap="item">
		SELECT
		QNA.id,member.name as qname,
		category,title,a_content,q_content,
		DATE_FORMAT(edit_date,
		'%Y-%m-%d
		%H-%i:%s') as edit_date,
		answerer_id,writer_id
		FROM QNA
		INNER
		JOIN member
		ON QNA.writer_id=member.id
		WHERE
		QNA.id=#{id}
	</select> -->

	<!-- 전체 게시물 수를 조회한다. -->
	<!--  <select id="selectQnaCount" parameterType="com.badaservice.model.Shop"
		resultType="item">
		SELECT COUNT(id) FROM QNA
		WHERE writer_id=#{writerId}
	</select>-->
	<!-- 게시글 삭제하기 -->
	<!-- <delete id="deleteQna" parameterType="com.badaservice.model.Shop">
		DELETE FROM QNA WHERE
		id=#{id}
	</delete>
 -->
	<!-- 게시글 정보 수정하기 -->
	<!-- <update id="updateQna" parameterType="com.badaservice.model.Shop">
		UPDATE QNA SET
		id=#{id},
		category=#{category},
		title=#{title},
		q_content=#{qContent},
		edit_date=now()
		WHERE id=#{id}
	</update> -->
</mapper>
